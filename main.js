(()=>{const t=document.querySelector("[data-new-list-form]"),e=document.querySelector("[data-new-list-input]"),n="task.lists",a=document.querySelector("[data-delete-list-button]");let l=JSON.parse(localStorage.getItem(n))||[];const i=document.querySelector("#listContainer"),d="task.selectedListId";let o=localStorage.getItem(d);const s=document.querySelector("[data-list-display-container]"),c=document.querySelector("[data-list-title]"),r=document.querySelector("[data-tasks]"),u=document.getElementById("task-template"),m=document.querySelector("[data-new-task-form]"),f=document.querySelector("[data-new-task-input]");function p(){l.forEach((t=>{const e=document.createElement("li");e.dataset.listId=t.id,e.classList.add("list-name"),e.innerText=t.name,t.id===o&&e.classList.add("active-list"),i.appendChild(e)}))}function S(){localStorage.setItem(n,JSON.stringify(l)),localStorage.setItem(d,o),function(){k(i),p();const t=l.find((t=>t.id===o));null==o||(s.style.display="",c.innerText=t.name,k(r),function(t){t.tasks.forEach((t=>{const e=document.importNode(u.content,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id,a.append(t.name),r.appendChild(e)}))}(t))}()}function k(t){for(;t.firstChild;)t.removeChild(t.firstChild)}document.querySelector("[data-clear-complete-tasks-button]").addEventListener("click",(t=>{const e=l.find((t=>t.id===o));e.tasks=e.tasks.filter((t=>!t.complete)),S()})),i.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(o=t.target.dataset.listId,S())})),a.addEventListener("click",(t=>{l=l.filter((t=>t.id!==o)),o=null,S()})),t.addEventListener("submit",(t=>{t.preventDefault();const n=e.value;if(null==n||""==n)return;const a=(i=n,{id:Date.now().toString(),name:i,tasks:[]});var i;e.value=null,l.push(a),S()})),m.addEventListener("submit",(t=>{t.preventDefault();const e=f.value;if(null==e||""===e)return;const n=(a=e,{id:Date.now().toString(),name:a,complete:!1});var a;f.value=null,l.find((t=>t.id===o)).tasks.push(n),S()})),r.addEventListener("click",(t=>{"input"===t.target.tagName.toLowerCase()&&(l.find((t=>t.id===o)).tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,S())})),p(),S()})();