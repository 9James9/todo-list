(()=>{const t=document.querySelector("[data-new-list-form]"),e=document.querySelector("[data-new-list-input]"),n="task.lists",a=document.querySelector("[data-delete-list-button]");let l=JSON.parse(localStorage.getItem(n))||[];const o=document.querySelector("#listContainer"),i="task.selectedListId";let s=localStorage.getItem(i);const d=document.querySelector("[data-list-display-container]"),c=document.querySelector("[data-list-title]"),r=document.querySelector("[data-tasks]"),u=document.getElementById("task-template"),m=document.querySelector("[data-new-task-form]"),f=document.querySelector("[data-new-task-input]");function p(){l.forEach((t=>{const e=document.createElement("li");e.dataset.listId=t.id,e.classList.add("list-name"),e.innerText=t.name,t.id===s&&e.classList.add("active-list"),o.appendChild(e)}))}function S(){localStorage.setItem(n,JSON.stringify(l)),localStorage.setItem(i,s),function(){y(o),p();const t=l.find((t=>t.id===s));null==s||(d.style.display="",c.innerText=t.name,y(r),function(t){t.tasks.forEach((t=>{const e=document.importNode(u.content,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id,a.append(t.name),r.appendChild(e)}))}(t))}()}function y(t){for(;t.firstChild;)t.removeChild(t.firstChild)}o.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(s=t.target.dataset.listId,S())})),a.addEventListener("click",(t=>{l=l.filter((t=>t.id!==s)),s=null,S()})),t.addEventListener("submit",(t=>{t.preventDefault();const n=e.value;if(null==n||""==n)return;const a=(o=n,{id:Date.now().toString(),name:o,tasks:[]});var o;e.value=null,l.push(a),S()})),m.addEventListener("submit",(t=>{t.preventDefault();const e=f.value;if(null==e||""===e)return;const n=(a=e,{id:Date.now().toString(),name:a,complete:!1});var a;f.value=null,l.find((t=>t.id===s)).tasks.push(n),console.log(n.name),S()})),p()})();