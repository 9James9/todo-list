(()=>{const t=document.querySelector("[data-new-list-form]"),e=document.querySelector("[data-new-list-input]"),n="task.lists",a=document.querySelector("[data-delete-list-button]");let l=JSON.parse(localStorage.getItem(n))||[];const o=document.querySelector("#listContainer"),i="task.selectedListId";let d=localStorage.getItem(i);document.querySelector("[data-list-display-container]");const s=document.querySelector("[data-list-title]"),c=document.querySelector("[data-tasks]"),r=document.getElementById("task-template"),u=document.querySelector("[data-new-task-form]"),m=document.querySelector("[data-new-task-input]"),p=document.querySelector("[data-clear-complete-tasks-button]"),f=document.querySelector("#todocontainer");function S(){l.forEach((t=>{const e=document.createElement("li");e.dataset.listId=t.id,e.classList.add("list-name"),e.innerText=t.name,t.id===d&&e.classList.add("active-list"),o.appendChild(e)}))}function y(){localStorage.setItem(n,JSON.stringify(l)),localStorage.setItem(i,d),function(){k(o),S();const t=l.find((t=>t.id===d));null==d?f.style.display="none":(f.style.display="",s.innerText=t.name,k(c),function(t){t.tasks.forEach((t=>{const e=document.importNode(r.content,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id,a.append(t.name),c.appendChild(e)}))}(t))}()}function k(t){for(;t.firstChild;)t.removeChild(t.firstChild)}p.addEventListener("click",(t=>{const e=l.find((t=>t.id===d));e.tasks=e.tasks.filter((t=>!t.complete)),y()})),o.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(d=t.target.dataset.listId,y())})),a.addEventListener("click",(t=>{l=l.filter((t=>t.id!==d)),d=null,y()})),t.addEventListener("submit",(t=>{t.preventDefault();const n=e.value;if(null==n||""==n)return;const a=(o=n,{id:Date.now().toString(),name:o,tasks:[]});var o;e.value=null,l.push(a),y()})),u.addEventListener("submit",(t=>{t.preventDefault();const e=m.value;if(null==e||""===e)return;const n=(a=e,{id:Date.now().toString(),name:a,complete:!1});var a;m.value=null,l.find((t=>t.id===d)).tasks.push(n),y()})),c.addEventListener("click",(t=>{"input"===t.target.tagName.toLowerCase()&&(l.find((t=>t.id===d)).tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,y())})),S(),y()})();