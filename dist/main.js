(()=>{const t=document.querySelector("[data-new-list-form]"),e=document.querySelector("[data-new-list-input]"),n="task.lists",a=document.querySelector("[data-delete-list-button]");let l=JSON.parse(localStorage.getItem(n))||[];const o=document.querySelector("#listContainer"),d="task.selectedListId";let i=localStorage.getItem(d);document.querySelector("[data-list-display-container]");const c=document.querySelector("[data-list-title]"),s=document.querySelector("[data-tasks]"),r=document.getElementById("task-template"),u=document.querySelector("[data-new-task-form]"),m=document.querySelector("[data-new-task-input]"),p=document.querySelector("[data-new-task-input-description]"),f=document.querySelector("[data-clear-complete-tasks-button]"),S=document.querySelector("#todocontainer");function y(){l.forEach((t=>{const e=document.createElement("li");e.dataset.listId=t.id,e.classList.add("list-name"),e.innerText=t.name,t.id===i&&e.classList.add("active-list"),o.appendChild(e)}))}function k(){localStorage.setItem(n,JSON.stringify(l)),localStorage.setItem(d,i),function(){v(o),y();const t=l.find((t=>t.id===i));null==i?S.style.display="none":(S.style.display="",c.innerText=t.name,v(s),function(t){t.tasks.forEach((t=>{const e=document.importNode(r.content,!0),n=e.querySelector("input");n.id=t.id,n.checked=t.complete;const a=e.querySelector("label");a.htmlFor=t.id;const l=document.createElement("h3"),o=document.createElement("p");o.textContent=t.description,l.textContent=t.name,a.appendChild(l),a.appendChild(o),s.appendChild(e)}))}(t))}()}function v(t){for(;t.firstChild;)t.removeChild(t.firstChild)}f.addEventListener("click",(t=>{const e=l.find((t=>t.id===i));e.tasks=e.tasks.filter((t=>!t.complete)),k()})),o.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(i=t.target.dataset.listId,k())})),a.addEventListener("click",(t=>{l=l.filter((t=>t.id!==i)),i=null,k()})),t.addEventListener("submit",(t=>{t.preventDefault();const n=e.value;if(null==n||""==n)return;const a=(o=n,{id:Date.now().toString(),name:o,tasks:[]});var o;e.value=null,l.push(a),k()})),u.addEventListener("submit",(t=>{t.preventDefault();const e=m.value,n=p.value;if(null==e||""===e)return;null!=n&&""!==n||(n="");const a=(o=e,d=n,{id:Date.now().toString(),name:o,description:d,complete:!1});var o,d;m.value=null,p.value=null,l.find((t=>t.id===i)).tasks.push(a),k()})),s.addEventListener("click",(t=>{"input"===t.target.tagName.toLowerCase()&&(l.find((t=>t.id===i)).tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,k())})),y(),k()})();